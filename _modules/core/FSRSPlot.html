<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>core.FSRSPlot &mdash; pyFSRS 1.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/icon.ico"/>
    <link rel="top" title="pyFSRS 1.0 documentation" href="../../index.html" />
    <link rel="up" title="Module code" href="../index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">pyFSRS 1.0 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../index.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../fsrs.html">What is FSRS?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installing pyFSRS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">Shipped Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extending.html">Extending pyFSRS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../coremodules.html">Description of Core Modules</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for core.FSRSPlot</h1><div class="highlight"><pre>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">.. module: FSRSPlot</span>
<span class="sd">   :platform: Windows</span>
<span class="sd">.. moduleauthor:: Daniel R. Dietze &lt;daniel.dietze@berkeley.edu&gt;</span>

<span class="sd">FSRSPlot is a lightweight plotting widget for wxPython for displaying pyFSRS measurement results.</span>
<span class="sd">It supports multiple line and scatter plots, contour plots and image plots.</span>
<span class="sd">While contour plots work on non-equidistantly sampled data and produce nice interpolated plots,</span>
<span class="sd">image plots operate on 2d arrays and provide an enourmous advantage in speed.</span>

<span class="sd">Further features include lin / log scale for x, y, and z axes (individually) as well as</span>
<span class="sd">reading data coordinates with mouse cursor, two independent data cursors for exploring line/scatter</span>
<span class="sd">data values and displaying the difference value.</span>

<span class="sd">Example usage::</span>

<span class="sd">    import wx</span>
<span class="sd">    import numpy as np</span>
<span class="sd">    from FSRSPlot import *</span>

<span class="sd">    # setup a wxPython app</span>
<span class="sd">    app = wx.App()</span>

<span class="sd">    # get an instance of a plot frame</span>
<span class="sd">    frame = PlotFrame(None, title=&quot;pyFSRS - Test plot panel&quot;, size=(640, 480))</span>
<span class="sd">    frame.plotCanvas.setColormap(&quot;blue&quot;)</span>

<span class="sd">    # get some nice data</span>
<span class="sd">    x = np.linspace(-10, 10, 64)</span>
<span class="sd">    y = np.linspace(-10, 10, 64)</span>

<span class="sd">    X, Y = np.meshgrid(x, y)</span>
<span class="sd">    z = np.exp(-(X**2 +Y**2) / 5.0**2) * np.sin(X)</span>
<span class="sd">    frame.plotCanvas.addImage(x, y, z)</span>
<span class="sd">    frame.plotCanvas.addLine(x, -5 + 10.0 * np.exp(-x**2 / 5.0**2))</span>

<span class="sd">    # show frame and start app</span>
<span class="sd">    frame.Show()</span>
<span class="sd">    app.MainLoop()</span>

<span class="sd">..</span>
<span class="sd">   This file is part of the pyFSRS app.</span>

<span class="sd">   This program is free software: you can redistribute it and/or modify</span>
<span class="sd">   it under the terms of the GNU General Public License as published by</span>
<span class="sd">   the Free Software Foundation, either version 3 of the License, or</span>
<span class="sd">   (at your option) any later version.</span>

<span class="sd">   This program is distributed in the hope that it will be useful,</span>
<span class="sd">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="sd">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="sd">   GNU General Public License for more details.</span>

<span class="sd">   You should have received a copy of the GNU General Public License</span>
<span class="sd">   along with this program. If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>

<span class="sd">   Copyright 2014-2016 Daniel Dietze &lt;daniel.dietze@berkeley.edu&gt;.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">wx</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">itertools</span>


<span class="c"># plot panel main class</span>
<div class="viewcode-block" id="FSRSPlot"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot">[docs]</a><span class="k">class</span> <span class="nc">FSRSPlot</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The FSRSPlot class is derived from wxPanel and provides a lightweight plotting interface</span>
<span class="sd">    for wxPython that not only supports line/scatter plots but also image and contour plots.</span>

<span class="sd">    I have kept the number of functions to control the layout to a minimum. Rather, the user is</span>
<span class="sd">    encouraged to directly mess with the class member variables. A list of variables and their default values are given in the following::</span>

<span class="sd">        # display the cross cursor when mouse is present in plot area</span>
<span class="sd">        self.showCross = True</span>

<span class="sd">        # display a grid</span>
<span class="sd">        self.showGrid = True</span>

<span class="sd">        # linewidth, markerstyle and colors for scatter / line plot</span>
<span class="sd">        self.markersize = 2</span>
<span class="sd">        self.linewidth = 2</span>

<span class="sd">        # background color</span>
<span class="sd">        self.bgcolor = wx.Colour(255, 255, 255)</span>

<span class="sd">        # margin of plotting area to boundary of panel in pixels</span>
<span class="sd">        self.leftmargin = 60</span>
<span class="sd">        self.bottommargin = 30</span>

<span class="sd">        # axis and ticks; font and colors</span>
<span class="sd">        self.ticklength = 5</span>
<span class="sd">        self.axisPen = wx.Pen(wx.Colour(0, 0, 0), width=2, style=wx.PENSTYLE_SOLID)</span>
<span class="sd">        self.font = wx.Font(12, wx.FONTFAMILY_SWISS, wx.FONTSTYLE_NORMAL, wx.FONTWEIGHT_BOLD)</span>

<span class="sd">        # display Delta-value, i.e. difference between cursors A and B</span>
<span class="sd">        self.deltafont = wx.Font(20, wx.FONTFAMILY_SWISS, wx.FONTSTYLE_NORMAL, wx.FONTWEIGHT_BOLD)</span>
<span class="sd">        self.deltafontPen = wx.Pen(wx.Colour(30, 0, 250), width=1, style=wx.PENSTYLE_SOLID)</span>

<span class="sd">        # grid</span>
<span class="sd">        self.gridPen = wx.Pen(wx.Colour(128, 128, 128), width=1, style=wx.PENSTYLE_DOT)</span>

<span class="sd">        # mouse crosshair</span>
<span class="sd">        self.crossPenDark = wx.Pen(wx.Colour(0, 0, 0), width=1, style=wx.PENSTYLE_SOLID)</span>
<span class="sd">        self.crossPenLight = wx.Pen(wx.Colour(255, 255, 255), width=1, style=wx.PENSTYLE_SOLID)</span>

<span class="sd">        # list of line colors; the color is cycled through the array for each new line or point</span>
<span class="sd">        self.linescolor = [wx.Colour(255, 0, 0), wx.Colour(255, 128, 128), wx.Colour(0, 0, 255),</span>
<span class="sd">                           wx.Colour(128, 128, 255) , wx.Colour(0, 255, 0), wx.Colour(128, 255, 128)]</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="nb">id</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetWindowStyle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">GetWindowStyle</span><span class="p">()</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">WANTS_CHARS</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetBackgroundStyle</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">BG_STYLE_PAINT</span><span class="p">)</span>

        <span class="c"># setup widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initVariables</span><span class="p">()</span>

        <span class="c"># Bind the events related to our control: first of all, we use a</span>
        <span class="c"># combination of wx.BufferedPaintDC and an empty handler for</span>
        <span class="c"># wx.EVT_ERASE_BACKGROUND (see later) to reduce flicker</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_PAINT</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnPaint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_ERASE_BACKGROUND</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnEraseBackground</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_SIZE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnResize</span><span class="p">)</span>

        <span class="c"># mouse events</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_LEFT_DOWN</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnLMouseDown</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_RIGHT_DOWN</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnRMouseDown</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_MOUSEWHEEL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnMouseWheel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_MOTION</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnMouseMove</span><span class="p">)</span>

        <span class="c"># keyboard events</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_KEY_DOWN</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OnKeyDown</span><span class="p">)</span>

<div class="viewcode-block" id="FSRSPlot.initVariables"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.initVariables">[docs]</a>    <span class="k">def</span> <span class="nf">initVariables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Init internally used variables and parameters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># data</span>
        <span class="c"># data contains a list of plot elements where</span>
        <span class="c"># data = [ [[x1, y1], [x2, y2], ...[xN, yN]], [..] ] for line/scatter,</span>
        <span class="c"># data = [ [[x1, x2, ...xN], [y1, y2, ..., yM], [[z11, z12, ...z1N], [z21, ..], ..]] ] for contour and</span>
        <span class="c"># data = [ [[x0, xN], [y0, yN], index] ] for image; x0, xN are min/max values</span>
        <span class="c"># and type one of &quot;line&quot;, &quot;scatter&quot;, &quot;contour&quot;, and &quot;image&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>               <span class="c"># plot data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span> <span class="o">=</span> <span class="p">[]</span>         <span class="c"># type of data stored in self.data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_extent</span> <span class="o">=</span> <span class="p">[]</span>        <span class="c"># list of data ranges [xmin, xmax, ymin, ymax]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">images</span> <span class="o">=</span> <span class="p">[]</span>             <span class="c"># list of wx.Bitmap objects</span>

        <span class="c"># -------------------------</span>
        <span class="c"># internally used variables</span>

        <span class="c"># memory dc for storing contour plots, which are time intensive to replot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contourDC</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">MemoryDC</span><span class="p">()</span>            <span class="c"># this stores the created image</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contourDCValid</span> <span class="o">=</span> <span class="bp">False</span>                <span class="c"># False -&gt; redraw the contour plot, True -&gt; copy from memoryDC</span>

        <span class="c"># data min/max and ticks for axis</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plotXMin</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plotXMax</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plotYMin</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plotYMax</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plotZMin</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plotZMax</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">XTicks</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">YTicks</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lblx</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lbly</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c"># mapping from data to screen</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">map_ax</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">map_bx</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">map_ay</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">map_by</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c"># size of actual plot area</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dcright</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c"># mouse control variables</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mousePos</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Point</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouseIn</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouseX1</span> <span class="o">=</span> <span class="bp">None</span>            <span class="c"># cursor positions in data coordinates!</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouseX2</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span> <span class="o">=</span> <span class="mi">0</span>                <span class="c"># index of line the cursors are assigned to</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>        <span class="c"># data value at cursor position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cursor2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

        <span class="c"># -------------------------</span>
        <span class="c"># layout parameters</span>

        <span class="c"># display the cross cursor when mouse is present in plot area</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showCross</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="c"># display a grid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showGrid</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="c"># background color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bgcolor</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">)</span>

        <span class="c"># margin of plotting area to boundary of panel in pixels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">leftmargin</span> <span class="o">=</span> <span class="mi">60</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bottommargin</span> <span class="o">=</span> <span class="mi">30</span>

        <span class="c"># axis and ticks; font and colors</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ticklength</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axiswidth</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Font</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">FONTFAMILY_SWISS</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">FONTSTYLE_NORMAL</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">FONTWEIGHT_BOLD</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axiscolor</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gridcolor</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">deltafont</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Font</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">FONTFAMILY_SWISS</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">FONTSTYLE_NORMAL</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">FONTWEIGHT_BOLD</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">deltafontcolor</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">250</span><span class="p">)</span>

        <span class="c"># set pen</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axisPen</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Pen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axiscolor</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">axiswidth</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">PENSTYLE_SOLID</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gridPen</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Pen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gridcolor</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">PENSTYLE_DOT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">crossPenDark</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Pen</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">PENSTYLE_SOLID</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">crossPenLight</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Pen</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">PENSTYLE_SOLID</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">deltafontPen</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Pen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deltafontcolor</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">PENSTYLE_SOLID</span><span class="p">)</span>

        <span class="c"># linewidth, markerstyle and colors for scatter / line plot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">markersize</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linewidth</span> <span class="o">=</span> <span class="mi">2</span>

        <span class="c"># list of line colors; the color is cycled through the array for each new line or point</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linescolor</span> <span class="o">=</span> <span class="p">[</span><span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">),</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span>
                           <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">128</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">128</span><span class="p">)]</span>

        <span class="c"># colormap for contour plot</span>
        <span class="c"># each entry consists of a value between 0 (min) and 1 (max) and a color</span>
        <span class="c"># the actual color is generated by linear interpolation between neighboring entries</span>
        <span class="c"># make sure that you sort the entries ascending!</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colormap</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">imgcolormap</span> <span class="o">=</span> <span class="p">[]</span>    <span class="c"># version for images with reduced color depth (256)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setColormap</span><span class="p">(</span><span class="s">&quot;rgb&quot;</span><span class="p">)</span>  <span class="c"># initialize colormaps</span>

        <span class="c"># logscale</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logx</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logy</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logz</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="c"># make a tight axis, i.e., use the data&#39;s extent for axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tightx</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tighty</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="c"># axis labels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xlabel</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ylabel</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>

        <span class="c"># extensions used for label formatting</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ext</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;z&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="s">&#39;p&#39;</span><span class="p">,</span> <span class="s">&#39;n&#39;</span><span class="p">,</span> <span class="s">&#39;u&#39;</span><span class="p">,</span> <span class="s">&#39;m&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="s">&#39;k&#39;</span><span class="p">,</span> <span class="s">&#39;M&#39;</span><span class="p">,</span> <span class="s">&#39;G&#39;</span><span class="p">,</span> <span class="s">&#39;T&#39;</span><span class="p">,</span> <span class="s">&#39;P&#39;</span><span class="p">,</span> <span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="s">&#39;Z&#39;</span><span class="p">,</span> <span class="s">&#39;Y&#39;</span><span class="p">]</span>

    <span class="c"># EVENTS</span></div>
<div class="viewcode-block" id="FSRSPlot.OnEraseBackground"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.OnEraseBackground">[docs]</a>    <span class="k">def</span> <span class="nf">OnEraseBackground</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Event handler for background erase.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="FSRSPlot.OnPaint"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.OnPaint">[docs]</a>    <span class="k">def</span> <span class="nf">OnPaint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Event handler for paint event.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dc</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BufferedPaintDC</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">dc</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="FSRSPlot.OnResize"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.OnResize">[docs]</a>    <span class="k">def</span> <span class="nf">OnResize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Event handler for resize event.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Refresh</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="FSRSPlot.OnLMouseDown"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.OnLMouseDown">[docs]</a>    <span class="k">def</span> <span class="nf">OnLMouseDown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Event handler for left mouse button down. Positions cursor A on the data if the plot is not empty.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="c"># get mouse position in window</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mousePos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ScreenToClient</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">GetMousePosition</span><span class="p">())</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mousePos</span><span class="o">.</span><span class="n">Get</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c"># if mouse is in data area, set cursor</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcright</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mouseX1</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">screen2data</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

            <span class="c"># find next line in this direction if the selected trace is not a line</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&quot;line&quot;</span><span class="p">,</span> <span class="s">&quot;scatter&quot;</span><span class="p">]:</span>
                <span class="n">mouseN0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span>
                <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span> <span class="o">+=</span> <span class="mi">1</span>

                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span> <span class="o">-=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&quot;line&quot;</span><span class="p">,</span> <span class="s">&quot;scatter&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span> <span class="o">==</span> <span class="n">mouseN0</span><span class="p">:</span>
                        <span class="k">break</span>
</div>
<div class="viewcode-block" id="FSRSPlot.OnRMouseDown"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.OnRMouseDown">[docs]</a>    <span class="k">def</span> <span class="nf">OnRMouseDown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Event hanlder for right mouse button down. Positions cursor B on the data if the plot is not empty.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="c"># get mouse position in window</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mousePos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ScreenToClient</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">GetMousePosition</span><span class="p">())</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mousePos</span><span class="o">.</span><span class="n">Get</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c"># if mouse is in data area, set cursor</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcright</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mouseX2</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">screen2data</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

            <span class="c"># find next line in this direction if the selected trace is not a line</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&quot;line&quot;</span><span class="p">,</span> <span class="s">&quot;scatter&quot;</span><span class="p">]:</span>
                <span class="n">mouseN0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span>
                <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span> <span class="o">+=</span> <span class="mi">1</span>

                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span> <span class="o">-=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&quot;line&quot;</span><span class="p">,</span> <span class="s">&quot;scatter&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span> <span class="o">==</span> <span class="n">mouseN0</span><span class="p">:</span>
                        <span class="k">break</span>
</div>
<div class="viewcode-block" id="FSRSPlot.OnMouseMove"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.OnMouseMove">[docs]</a>    <span class="k">def</span> <span class="nf">OnMouseMove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Event handler for mouse move event. Updates current position of cursor in data coordinates.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="c"># get mouse position in window</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mousePos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ScreenToClient</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">GetMousePosition</span><span class="p">())</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mousePos</span><span class="o">.</span><span class="n">Get</span><span class="p">()</span>

        <span class="c"># if mouse is in data area, refresh the screen to display the new coordinates</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcright</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mouseIn</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Refresh</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseIn</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mouseIn</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Refresh</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="FSRSPlot.OnMouseWheel"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.OnMouseWheel">[docs]</a>    <span class="k">def</span> <span class="nf">OnMouseWheel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Event handler for mouse wheel event. This event is used to switch the active line / scatter plot for the cursors.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">GetWheelRotation</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c"># get stepping direction</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">delta</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c"># find next line in this direction</span>
        <span class="n">mouseN0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span>
        <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span> <span class="o">+=</span> <span class="n">d</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span> <span class="o">-=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&quot;line&quot;</span><span class="p">,</span> <span class="s">&quot;scatter&quot;</span><span class="p">]</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span> <span class="o">==</span> <span class="n">mouseN0</span><span class="p">:</span>
                <span class="k">break</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseX1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseX2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Refresh</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="FSRSPlot.OnKeyDown"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.OnKeyDown">[docs]</a>    <span class="k">def</span> <span class="nf">OnKeyDown</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Event handler for key-press event. Handles the following key strokes:</span>

<span class="sd">            - **C**: Clear plot.</span>
<span class="sd">            - **X**: Switch between linear and logarithmic scaling on x-axis.</span>
<span class="sd">            - **Y**: Switch between linear and logarithmic scaling on y-axis.</span>
<span class="sd">            - **Z**: Switch between linear and logarithmic scaling on z-axis. Affects only contour and image plots.</span>
<span class="sd">            - **M**: Center cursor A on maxium of active line/scatter plot.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>
        <span class="n">c</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">GetKeyCode</span><span class="p">()),</span> <span class="mi">255</span><span class="p">))</span>   <span class="c"># select only ascii range, no special keys</span>

        <span class="k">if</span> <span class="n">c</span> <span class="o">==</span> <span class="s">&#39;C&#39;</span><span class="p">:</span>    <span class="c"># clear cursors</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mouseX1</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mouseX2</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Refresh</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">c</span> <span class="o">==</span> <span class="s">&#39;X&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logx</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">logx</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">contourDCValid</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Refresh</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">c</span> <span class="o">==</span> <span class="s">&#39;Y&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logy</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">logy</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">contourDCValid</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Refresh</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">c</span> <span class="o">==</span> <span class="s">&#39;Z&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logz</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">logz</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">contourDCValid</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Refresh</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">c</span> <span class="o">==</span> <span class="s">&#39;M&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&quot;line&quot;</span><span class="p">,</span> <span class="s">&quot;scatter&quot;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mouseX1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span><span class="p">][</span><span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span><span class="p">][:,</span> <span class="mi">1</span><span class="p">]),</span> <span class="mi">0</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">Refresh</span><span class="p">()</span>

    <span class="c"># DATA HANDLING</span></div>
<div class="viewcode-block" id="FSRSPlot.addImage"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.addImage">[docs]</a>    <span class="k">def</span> <span class="nf">addImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add an image plot.</span>

<span class="sd">        :param array x: x-axis. Only the min/max values are used and the axis is linearly interpolated.</span>
<span class="sd">        :param array y: y-axis. Only the min/max values are used and the axis is linearly interpolated.</span>
<span class="sd">        :param array z: Image data, 2d-array.</span>
<span class="sd">        :returns: Plot id.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># get image width and height</span>
        <span class="n">h</span><span class="p">,</span> <span class="n">w</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">shape</span>
        <span class="nb">min</span><span class="p">,</span> <span class="nb">max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">amin</span><span class="p">(</span><span class="n">z</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>

        <span class="c"># these are color indices</span>
        <span class="n">c</span> <span class="o">=</span> <span class="p">(((</span><span class="n">z</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span> <span class="o">-</span> <span class="nb">min</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nb">max</span> <span class="o">-</span> <span class="nb">min</span><span class="p">))</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

        <span class="c"># append to image list</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">BitmapFromBuffer</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">imgcolormap</span><span class="p">[</span><span class="n">c</span><span class="p">]))</span>

        <span class="c"># append to data list</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(((</span><span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">y</span><span class="p">)),</span> <span class="nb">id</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;image&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_extent</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">y</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Refresh</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">id</span>
</div>
<div class="viewcode-block" id="FSRSPlot.addContour"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.addContour">[docs]</a>    <span class="k">def</span> <span class="nf">addContour</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add contour plot.</span>

<span class="sd">        :param array x: x-axis of length N. Does not have to be uniform.</span>
<span class="sd">        :param array y: y-axis of length M. Does not have to be uniform.</span>
<span class="sd">        :param array z: z-data, MxN array.</span>
<span class="sd">        :returns: Plot id.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">!=</span> <span class="n">z</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Length of x and z arrays is not compatible!&quot;</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">!=</span> <span class="n">z</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Length of y and z arrays is not compatible!&quot;</span><span class="p">)</span>

        <span class="nb">id</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;contour&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_extent</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">y</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contourDCValid</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Refresh</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">id</span>
</div>
<div class="viewcode-block" id="FSRSPlot.addLine"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.addLine">[docs]</a>    <span class="k">def</span> <span class="nf">addLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a line plot or single point.</span>

<span class="sd">        :param array x: x-axis. Can also be a single integer or floating point number.</span>
<span class="sd">        :param array y: y-axis data with same shape as x.</span>
<span class="sd">        :returns: Plot id.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="k">if</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Length of x and y arrays is different!&quot;</span><span class="p">)</span>
            <span class="n">nd</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">nd</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">y</span><span class="p">)],</span> <span class="p">])</span>

        <span class="nb">id</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nd</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;line&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_extent</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">y</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Refresh</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">id</span>
</div>
<div class="viewcode-block" id="FSRSPlot.addScatter"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.addScatter">[docs]</a>    <span class="k">def</span> <span class="nf">addScatter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a scatter plot.</span>

<span class="sd">        :param array x: x-axis. Can also be a single integer or floating point number.</span>
<span class="sd">        :param array y: y-axis data with same shape as x.</span>
<span class="sd">        :returns: Plot id.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addLine</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;scatter&#39;</span>
        <span class="k">return</span> <span class="nb">id</span>
</div>
<div class="viewcode-block" id="FSRSPlot.setImage"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.setImage">[docs]</a>    <span class="k">def</span> <span class="nf">setImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Overwrite an existing image plot.</span>

<span class="sd">        :param int id: Id or index of image plot to overwrite. The plot at the given id must already be an image plot.</span>
<span class="sd">        :param array x: x-axis. Only the min/max values are used and the axis is linearly interpolated.</span>
<span class="sd">        :param array y: y-axis. Only the min/max values are used and the axis is linearly interpolated.</span>
<span class="sd">        :param array z: Image data, 2d-array.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">id</span><span class="p">))</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">id</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;ID of plot element out of range!&quot;</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&quot;image&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Element with given ID is not an image plot!&quot;</span><span class="p">)</span>

        <span class="c"># get image width and height</span>
        <span class="n">h</span><span class="p">,</span> <span class="n">w</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">shape</span>
        <span class="nb">min</span><span class="p">,</span> <span class="nb">max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">amin</span><span class="p">(</span><span class="n">z</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>

        <span class="c"># these are color indices</span>
        <span class="n">c</span> <span class="o">=</span> <span class="p">(((</span><span class="n">z</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span> <span class="o">-</span> <span class="nb">min</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nb">max</span> <span class="o">-</span> <span class="nb">min</span><span class="p">))</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

        <span class="c"># overwrite image</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="nb">id</span><span class="p">][</span><span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BitmapFromBuffer</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">imgcolormap</span><span class="p">[</span><span class="n">c</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">y</span><span class="p">)),</span> <span class="nb">id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_extent</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Refresh</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="FSRSPlot.setContour"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.setContour">[docs]</a>    <span class="k">def</span> <span class="nf">setContour</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Overwrite an existing contour plot.</span>

<span class="sd">        :param int id: Id or index of contour plot to overwrite. The plot at the given id must already be a contour plot.</span>
<span class="sd">        :param array x: x-axis of length N. Does not have to be uniform.</span>
<span class="sd">        :param array y: y-axis of length M. Does not have to be uniform.</span>
<span class="sd">        :param array z: z-data, MxN array.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">!=</span> <span class="n">z</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Length of x and z arrays is not compatible!&quot;</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">!=</span> <span class="n">z</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Length of y and z arrays is not compatible!&quot;</span><span class="p">)</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">id</span><span class="p">))</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">id</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;ID of plot element out of range!&quot;</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&quot;contour&quot;</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Element with given ID is not a contour plot!&quot;</span><span class="p">)</span>

        <span class="n">nd</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">nd</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_extent</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contourDCValid</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Refresh</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="FSRSPlot.setLine"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.setLine">[docs]</a>    <span class="k">def</span> <span class="nf">setLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Overwrite an existing line / scatter plot.</span>

<span class="sd">        :param int id: Id or index of line / scatter plot to overwrite. The plot at the given id must already be a line / scatter plot.</span>
<span class="sd">        :param array x: x-axis. Can also be a single integer or floating point number.</span>
<span class="sd">        :param array y: y-axis data with same shape as x.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Length of x and y arrays is different!&quot;</span><span class="p">)</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="nb">id</span><span class="p">))</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">id</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;ID of plot element out of range!&quot;</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&quot;line&quot;</span><span class="p">,</span> <span class="s">&quot;scatter&quot;</span><span class="p">]):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Element with given ID is not a line / scatter plot!&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="k">if</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Length of x and y arrays is different!&quot;</span><span class="p">)</span>
            <span class="n">nd</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">nd</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">y</span><span class="p">)],</span> <span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">nd</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_extent</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">y</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Refresh</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="FSRSPlot.setScatter"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.setScatter">[docs]</a>    <span class="k">def</span> <span class="nf">setScatter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Same as `setLine`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setLine</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="FSRSPlot.getNumberOfPlots"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.getNumberOfPlots">[docs]</a>    <span class="k">def</span> <span class="nf">getNumberOfPlots</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns total number of plots in this plot window.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="FSRSPlot.removeLastPlot"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.removeLastPlot">[docs]</a>    <span class="k">def</span> <span class="nf">removeLastPlot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove last added plot from the stack.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_extent</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Refresh</span><span class="p">()</span>

    <span class="c"># returns the colormap with given label</span>
    <span class="c"># a colormap consists of two lists, the first containing the supporting points and the second containing the respective r,g,b values</span></div>
<div class="viewcode-block" id="FSRSPlot.setColormap"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.setColormap">[docs]</a>    <span class="k">def</span> <span class="nf">setColormap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s">&#39;rainbow&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Activates the colormap with the given label for plotting.</span>

<span class="sd">        A colormap consists of a tuple of lists, the first containing the supporting points in the interval 0 to 1 and the second containing the respective r,g,b values as lists.</span>
<span class="sd">        For example, the &#39;rgb&#39; colormap is defined as::</span>

<span class="sd">            cmap = ([0,            0.5,         1],</span>
<span class="sd">                    [[0, 0, 255], [0, 255, 0], [255, 0, 0]])</span>

<span class="sd">        :param mixed cmap: Either name of the colormap or a colormap-defining tuple (default=&#39;rgb&#39;). Valid colormap names are &#39;hot&#39;, &#39;rainbow&#39;, &#39;rgb&#39;, &#39;blue&#39;, &#39;red&#39;, &#39;green&#39;, &#39;rwb&#39; (red-white-blue).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cmap</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">cmap</span> <span class="o">==</span> <span class="s">&quot;hot&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colormap</span> <span class="o">=</span> <span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.33</span><span class="p">,</span> <span class="mf">0.66</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">]])</span>
            <span class="k">elif</span> <span class="n">cmap</span> <span class="o">==</span> <span class="s">&quot;rainbow&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colormap</span> <span class="o">=</span> <span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.35</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.65</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[[</span><span class="mi">150</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
            <span class="k">elif</span> <span class="n">cmap</span> <span class="o">==</span> <span class="s">&quot;rgb&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colormap</span> <span class="o">=</span> <span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
            <span class="k">elif</span> <span class="n">cmap</span> <span class="o">==</span> <span class="s">&quot;blue&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colormap</span> <span class="o">=</span> <span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">],</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">]])</span>
            <span class="k">elif</span> <span class="n">cmap</span> <span class="o">==</span> <span class="s">&quot;red&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colormap</span> <span class="o">=</span> <span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">]])</span>
            <span class="k">elif</span> <span class="n">cmap</span> <span class="o">==</span> <span class="s">&quot;green&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colormap</span> <span class="o">=</span> <span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">]])</span>
            <span class="k">else</span><span class="p">:</span>  <span class="c"># red-white-blue</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">colormap</span> <span class="o">=</span> <span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">],</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">],</span> <span class="p">[</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]])</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cmap</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cmap</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">cmap</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">cmap</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">cmap</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">cmap</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
                <span class="k">print</span> <span class="s">&quot;ERROR: cmap is not a valid colormap.&quot;</span>
                <span class="k">return</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">colormap</span> <span class="o">=</span> <span class="n">cmap</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;ERROR: Wrong datatype in setColormap! Has to be string or tuple.&quot;</span>
            <span class="k">return</span>

        <span class="c"># prepare colormap for image</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">imgcolormap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getZColor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">256</span><span class="p">),</span> <span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="mi">256</span><span class="p">)</span>

        <span class="c"># replot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contourDCValid</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Refresh</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="FSRSPlot.setXLabel"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.setXLabel">[docs]</a>    <span class="k">def</span> <span class="nf">setXLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set x-axis label.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xlabel</span> <span class="o">=</span> <span class="n">label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Refresh</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="FSRSPlot.setYLabel"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.setYLabel">[docs]</a>    <span class="k">def</span> <span class="nf">setYLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set y-axis label.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ylabel</span> <span class="o">=</span> <span class="n">label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Refresh</span><span class="p">()</span>

    <span class="c"># adjust min, max of data to get nice looking axes ticks</span>
    <span class="c"># returns new min, max and a list of tickmark positions in data coordinates (real! data coordinates)</span>
    <span class="c"># if logscale = True, min and max are already log10() of data</span></div>
<div class="viewcode-block" id="FSRSPlot.adjustAxis"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.adjustAxis">[docs]</a>    <span class="k">def</span> <span class="nf">adjustAxis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_min</span><span class="p">,</span> <span class="n">_max</span><span class="p">,</span> <span class="n">logscale</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Internally used to adjust min, max and number of ticks to get nice looking axes.</span>

<span class="sd">        :param float _min: Minimum data value.</span>
<span class="sd">        :param float _max: Maximum data value.</span>
<span class="sd">        :param bool logscale: Set to True when axis is using logscale, to adapt the number of ticks (default=False).</span>
<span class="sd">        :returns: Suggested min, max and number of ticks.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ticks</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">_min</span> <span class="o">==</span> <span class="n">_max</span><span class="p">:</span>
            <span class="n">_min</span><span class="p">,</span> <span class="n">_max</span> <span class="o">=</span> <span class="n">_min</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">_max</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="n">grossStep</span> <span class="o">=</span> <span class="p">(</span><span class="n">_max</span> <span class="o">-</span> <span class="n">_min</span><span class="p">)</span> <span class="o">/</span> <span class="mf">4.0</span>
        <span class="n">step</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">grossStep</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">step</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">step</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="mf">5.0</span> <span class="o">*</span> <span class="n">step</span> <span class="o">&lt;</span> <span class="n">grossStep</span><span class="p">:</span>
            <span class="n">step</span> <span class="o">=</span> <span class="n">step</span> <span class="o">*</span> <span class="mf">5.0</span>
        <span class="k">elif</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="n">step</span> <span class="o">&lt;</span> <span class="n">grossStep</span><span class="p">:</span>
            <span class="n">step</span> <span class="o">=</span> <span class="n">step</span> <span class="o">*</span> <span class="mf">2.0</span>

        <span class="n">_min</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">_min</span> <span class="o">/</span> <span class="n">step</span><span class="p">)</span> <span class="o">*</span> <span class="n">step</span>
        <span class="n">_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">_max</span> <span class="o">/</span> <span class="n">step</span><span class="p">)</span> <span class="o">*</span> <span class="n">step</span>

        <span class="k">if</span> <span class="n">logscale</span><span class="p">:</span>
            <span class="c"># if less than 3 order of magnitude are shown, include sub-ticks</span>
            <span class="n">useSubTicks</span> <span class="o">=</span> <span class="p">(</span><span class="n">step</span> <span class="o">&lt;</span> <span class="mf">1.0</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">_min</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">_max</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">step</span><span class="p">))):</span>
                <span class="n">ticks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
                <span class="k">if</span> <span class="n">useSubTicks</span> <span class="ow">and</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nb">int</span><span class="p">(</span><span class="n">_max</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
                        <span class="n">ticks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">nticks</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">_max</span> <span class="o">/</span> <span class="n">step</span><span class="p">)</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">_min</span> <span class="o">/</span> <span class="n">step</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nticks</span><span class="p">):</span>
                <span class="n">ticks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_min</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="n">step</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">_min</span><span class="p">,</span> <span class="n">_max</span><span class="p">,</span> <span class="n">ticks</span>

    <span class="c"># parse all plot objects and determine the extent of the data x, y axes</span></div>
<div class="viewcode-block" id="FSRSPlot.getDataMinMax"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.getDataMinMax">[docs]</a>    <span class="k">def</span> <span class="nf">getDataMinMax</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Internally used to get the extent of data along x, y and z-axes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plotXMin</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plotXMax</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plotYMin</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plotYMax</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plotZMin</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plotZMax</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="c"># there is some data, get min / max</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotXMin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">amin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_extent</span><span class="p">)[:,</span> <span class="mi">0</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotXMax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_extent</span><span class="p">)[:,</span> <span class="mi">1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotYMin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">amin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_extent</span><span class="p">)[:,</span> <span class="mi">2</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotYMax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data_extent</span><span class="p">)[:,</span> <span class="mi">3</span><span class="p">])</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">logx</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plotXMin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan_to_num</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotXMin</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plotXMax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan_to_num</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotXMax</span><span class="p">))</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">logy</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plotYMin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan_to_num</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotYMin</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plotYMax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan_to_num</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotYMax</span><span class="p">))</span>

            <span class="c"># check for contour plot for z-range</span>
            <span class="k">if</span> <span class="s">&#39;contour&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="p">:</span>
                <span class="n">zmin</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="n">zmax</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">pl</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;contour&quot;</span><span class="p">:</span>
                        <span class="n">zmin</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">pl</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
                        <span class="n">zmax</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">pl</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plotZMin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmin</span><span class="p">(</span><span class="n">zmin</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plotZMax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmax</span><span class="p">(</span><span class="n">zmax</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">logz</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plotZMin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan_to_num</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotZMin</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plotZMax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan_to_num</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotZMax</span><span class="p">))</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotZMin</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotZMax</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plotZMin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotZMax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotZMin</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotZMax</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotXMin</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotXMax</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plotXMin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotXMax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotXMin</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotXMax</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotYMin</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotYMax</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plotYMin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotYMax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotYMin</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotYMax</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="c"># get a nice, consistent formatting of the labels</span></div>
<div class="viewcode-block" id="FSRSPlot.formatLabels"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.formatLabels">[docs]</a>    <span class="k">def</span> <span class="nf">formatLabels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">logscale</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Internally used to get nice, consistent formatting for the tick labels.</span>
<span class="sd">        Automatically decides for scientific or floating point notation and uses scientific prefixes to keep number of decimals below 3.</span>

<span class="sd">        :param array values: Array of numeric values for which labels are to be generated.</span>
<span class="sd">        :param bool logscale: Set to True, when axis uses logscale. This changes the appearance of the labels.</span>
<span class="sd">        :returns: An array of strings with label texts.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">txt</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">logscale</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">values</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">v</span><span class="p">))</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>
                    <span class="n">txt</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;%.e&quot;</span> <span class="o">%</span> <span class="n">v</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">txt</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xmax</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">absolute</span><span class="p">(</span><span class="n">values</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">xmax</span> <span class="o">&lt;</span> <span class="mf">1e4</span> <span class="ow">and</span> <span class="n">xmax</span> <span class="o">&gt;=</span> <span class="mf">1e-1</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
                <span class="n">fmt</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%%</span><span class="s">.0f&quot;</span>
                <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">around</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="n">d</span><span class="p">))</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">:</span>
                        <span class="n">fmt</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%%</span><span class="s">.</span><span class="si">%d</span><span class="s">f&quot;</span> <span class="o">%</span> <span class="n">d</span>
                        <span class="k">break</span>
                <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
                    <span class="n">txt</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fmt</span> <span class="o">%</span> <span class="n">v</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">nmax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">xmax</span><span class="p">)</span> <span class="o">/</span> <span class="mf">3.0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ext</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="mi">8</span>
                <span class="n">exttxt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ext</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">nmax</span> <span class="o">+</span> <span class="mi">8</span><span class="p">)]</span>

                <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="n">nmax</span><span class="p">)</span>

                <span class="n">fmt</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%%</span><span class="s">.0f&quot;</span>
                <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">around</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="n">d</span><span class="p">))</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="n">x</span><span class="o">.</span><span class="n">shape</span><span class="p">:</span>
                        <span class="n">fmt</span> <span class="o">=</span> <span class="s">&quot;</span><span class="si">%%</span><span class="s">.</span><span class="si">%d</span><span class="s">f</span><span class="si">%%</span><span class="s">s&quot;</span> <span class="o">%</span> <span class="n">d</span>
                        <span class="k">break</span>
                <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">x</span><span class="p">:</span>
                    <span class="n">txt</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fmt</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">exttxt</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">txt</span>

    <span class="c"># same for a single number</span></div>
<div class="viewcode-block" id="FSRSPlot.formatNumber"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.formatNumber">[docs]</a>    <span class="k">def</span> <span class="nf">formatNumber</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a formatted number according to the formatting rules that also apply to the labels. Use scientific prefixes and limit the number of decimals below 3.</span>

<span class="sd">        :param float x: Number.</span>
<span class="sd">        :returns: Formatted string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">&quot;0.0&quot;</span>
        <span class="n">nmax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="o">/</span> <span class="mf">3.0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ext</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="mi">8</span>
        <span class="n">exttxt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ext</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">nmax</span> <span class="o">+</span> <span class="mi">8</span><span class="p">)]</span>
        <span class="k">return</span> <span class="s">&quot;</span><span class="si">%.1f%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="n">nmax</span><span class="p">),</span> <span class="n">exttxt</span><span class="p">)</span>

    <span class="c"># returns an interpolated value for alpha</span>
    <span class="c"># alpha is a scalar!</span></div>
<div class="viewcode-block" id="FSRSPlot.interpolateColor"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.interpolateColor">[docs]</a>    <span class="k">def</span> <span class="nf">interpolateColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">alpha</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Used internally to calculate the rgb-values for a scalar alpha (0..1) and the currently set colormap.</span>

<span class="sd">        :param float alpha: Scalar between 0 and 1.</span>
<span class="sd">        :returns: RGB-tuple.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colormap</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">colors1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colormap</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">alpha</span> <span class="o">&lt;=</span> <span class="n">x1</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">colors1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">alpha</span> <span class="o">&gt;=</span> <span class="n">x1</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">return</span> <span class="n">colors1</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">roll</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">colors2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">roll</span><span class="p">(</span><span class="n">colors1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

            <span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">alpha</span> <span class="o">&gt;=</span> <span class="n">x1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">alpha</span> <span class="o">&lt;=</span> <span class="n">x2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">B</span> <span class="o">=</span> <span class="p">((</span><span class="n">alpha</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span> <span class="o">*</span> <span class="n">colors2</span><span class="o">.</span><span class="n">T</span> <span class="o">+</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">alpha</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">x2</span> <span class="o">-</span> <span class="n">x1</span><span class="p">)</span> <span class="o">*</span> <span class="n">colors1</span><span class="o">.</span><span class="n">T</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
            <span class="n">C</span> <span class="o">=</span> <span class="p">(</span><span class="n">B</span><span class="o">.</span><span class="n">T</span> <span class="o">*</span> <span class="n">A</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>

            <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c"># get color for z value from colormap; returns r, g, b tuple</span>
    <span class="c"># if min = max, use the data range stored in self.plotZMin / Max</span></div>
<div class="viewcode-block" id="FSRSPlot.getZColor"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.getZColor">[docs]</a>    <span class="k">def</span> <span class="nf">getZColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="nb">min</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get RGB-tuples for z-values according to current colormap.</span>

<span class="sd">        When `min == max`, the full z-extent of the data is used for mapping.</span>

<span class="sd">        :param mixed z: Single z-value, 1d or 2d-array of z-values.</span>
<span class="sd">        :param float min: Minimum z value that gets mapped onto 0.</span>
<span class="sd">        :param float max: Maximum z value that gets mapped onto 1.</span>
<span class="sd">        :returns: RGB-tuples with same shape as z.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">min</span> <span class="o">==</span> <span class="nb">max</span><span class="p">:</span>
            <span class="nb">min</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotZMin</span>
            <span class="nb">max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotZMax</span>

        <span class="c"># get position in colormap</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="n">z</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nb">max</span> <span class="o">-</span> <span class="nb">min</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="nb">float</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolateColor</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">col</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">interpolateColor</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">flatten</span><span class="p">()))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">col</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">a</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">col</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">3</span><span class="p">)</span>

    <span class="c"># get mapping prefactors from data to dc space and vice versa</span>
    <span class="c"># min/max values are already in log10 when logscale is used</span></div>
<div class="viewcode-block" id="FSRSPlot.prepareMapping"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.prepareMapping">[docs]</a>    <span class="k">def</span> <span class="nf">prepareMapping</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Internally used to prepare the mapping from data to screen coordinates and vice-versa.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">map_ax</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dcright</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span><span class="p">)</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotXMax</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotXMin</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">map_bx</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">map_ax</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotXMin</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">map_ay</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dctop</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span><span class="p">)</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotYMax</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotYMin</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">map_by</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">map_ay</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotYMin</span><span class="p">)</span>

    <span class="c"># convert data coordinates to screen coordinates and back</span>
    <span class="c"># screen coordinates are int while data coordinates are float</span>
    <span class="c"># accepts single numbers as well as arrays</span></div>
<div class="viewcode-block" id="FSRSPlot.data2screen"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.data2screen">[docs]</a>    <span class="k">def</span> <span class="nf">data2screen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Convert data coordinates x, y to screen coordinates.</span>

<span class="sd">        :param mixed x: Single x value or x-axis.</span>
<span class="sd">        :param mixed y: Single y value or y-axis with same shape as x.</span>
<span class="sd">        :returns: i, j pixel coordinates (integers) with same shapes as x, y.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">logx</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan_to_num</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">logy</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan_to_num</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">map_ax</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">map_bx</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">),</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">map_ay</span> <span class="o">*</span> <span class="n">y</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">map_by</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">map_ax</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">map_bx</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">map_ay</span> <span class="o">*</span> <span class="n">y</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">map_by</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="FSRSPlot.screen2data"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.screen2data">[docs]</a>    <span class="k">def</span> <span class="nf">screen2data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Convert screen coordinates i, j to data coordinates.</span>

<span class="sd">        :param mixed i: Single i value or i-axis.</span>
<span class="sd">        :param mixed j: Single j value or j-axis with same shape as i.</span>
<span class="sd">        :returns: x, y data coordinates (float) with same shapes as i, j.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="n">j</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">map_bx</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">map_ax</span>
            <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">j</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">map_by</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">map_ay</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">map_bx</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">map_ax</span>
            <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">map_by</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">map_ay</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">logx</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">logy</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>

    <span class="c"># DRAWING FUNCTIONS</span></div>
<div class="viewcode-block" id="FSRSPlot.Draw"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.Draw">[docs]</a>    <span class="k">def</span> <span class="nf">Draw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dc</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Internally used to draw the plots to a device context (dc).</span>
<span class="sd">        Plotting order is contour plots first, followed by image plots and line / scatter plots and axes, labels and cursors.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># Get the actual client size of ourselves</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dcwidth</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcheight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetClientSize</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcwidth</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcheight</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c"># set text properties</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">)</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">SetTextBackground</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bgcolor</span><span class="p">)</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">SetTextForeground</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axiscolor</span><span class="p">)</span>

        <span class="c"># get extent of data and adjust ticks to get nice axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">getDataMinMax</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tightx</span><span class="p">:</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">XTicks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjustAxis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotXMin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotXMax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">logx</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotXMin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotXMax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">XTicks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjustAxis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotXMin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotXMax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">logx</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tighty</span><span class="p">:</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">YTicks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjustAxis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotYMin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotYMax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">logy</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotYMin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotYMax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">YTicks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">adjustAxis</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotYMin</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotYMax</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">logy</span><span class="p">)</span>

        <span class="c"># format labels</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lblx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">formatLabels</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">XTicks</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">logx</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lbly</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">formatLabels</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">YTicks</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">logy</span><span class="p">)</span>

        <span class="c"># get label sizes</span>
        <span class="n">lblwidth</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">lbly</span><span class="p">:</span>
            <span class="n">tmp</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">GetTextExtent</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">tmp</span> <span class="o">&gt;</span> <span class="n">lblwidth</span><span class="p">:</span>
                <span class="n">lblwidth</span> <span class="o">=</span> <span class="n">tmp</span>
        <span class="n">_</span><span class="p">,</span> <span class="n">lblheight</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">GetTextExtent</span><span class="p">(</span><span class="s">&quot;Text&quot;</span><span class="p">)</span>

        <span class="c"># determine optimal margins</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bottommargin</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">lblheight</span>
        <span class="k">if</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xlabel</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bottommargin</span> <span class="o">+=</span> <span class="n">lblheight</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">leftmargin</span> <span class="o">=</span> <span class="n">lblheight</span> <span class="o">+</span> <span class="n">lblwidth</span>
        <span class="k">if</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ylabel</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">leftmargin</span> <span class="o">+=</span> <span class="n">lblheight</span>

        <span class="c"># get coordinates of plot area in dc</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">leftmargin</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">lblheight</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dcright</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcwidth</span> <span class="o">-</span> <span class="n">lblheight</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcheight</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">bottommargin</span>

        <span class="c"># now prepare mapping prefactors between data and screen</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prepareMapping</span><span class="p">()</span>

        <span class="c"># erase dc by filling with background color</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">SetBackground</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Brush</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bgcolor</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">SOLID</span><span class="p">))</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">Clear</span><span class="p">()</span>

        <span class="c"># plot all contour plots FIRST</span>
        <span class="c"># this is important as this is the image that gets stored in the memoryDC</span>
        <span class="k">if</span> <span class="s">&#39;contour&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">contourDCValid</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;contour&quot;</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">drawContour</span><span class="p">(</span><span class="n">dc</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>

                <span class="c"># clear old bitmap</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">contourDC</span><span class="o">.</span><span class="n">SelectObject</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">NullBitmap</span><span class="p">)</span>
                <span class="c"># create new bitmap</span>
                <span class="n">bmp</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">EmptyBitmap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dcright</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">contourDC</span><span class="o">.</span><span class="n">SelectObject</span><span class="p">(</span><span class="n">bmp</span><span class="p">)</span>
                <span class="c"># copy dc data</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">contourDC</span><span class="o">.</span><span class="n">Blit</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcright</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">dc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">contourDCValid</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">wsrc</span><span class="p">,</span> <span class="n">hsrc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contourDC</span><span class="o">.</span><span class="n">GetSize</span><span class="p">()</span>
                <span class="n">dc</span><span class="o">.</span><span class="n">StretchBlit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcright</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">contourDC</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wsrc</span><span class="p">,</span> <span class="n">hsrc</span><span class="p">)</span>

        <span class="c"># now plot all images</span>
        <span class="k">if</span> <span class="s">&#39;image&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;image&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">drawImage</span><span class="p">(</span><span class="n">dc</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>

        <span class="c"># now plot all line plots</span>
        <span class="k">if</span> <span class="s">&#39;line&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span> <span class="ow">or</span> <span class="s">&#39;scatter&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lineColorIter</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">cycle</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">linescolor</span><span class="p">)</span>    <span class="c"># reset the iterator</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;line&quot;</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;scatter&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">drawLine</span><span class="p">(</span><span class="n">dc</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_types</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mouseN</span> <span class="o">==</span> <span class="n">i</span><span class="p">))</span>

        <span class="c"># finally plot the axes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drawAxes</span><span class="p">(</span><span class="n">dc</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="FSRSPlot.drawImage"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.drawImage">[docs]</a>    <span class="k">def</span> <span class="nf">drawImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dc</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Internally used to draw an image (img) to a device context (dc).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># set up a dcclipper to constrain the lineart to the plot area</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">DCClipper</span><span class="p">(</span><span class="n">dc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcright</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c"># create a memory DC from the stored bitmap</span>
        <span class="n">memdc</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">MemoryDC</span><span class="p">()</span>
        <span class="n">memdc</span><span class="o">.</span><span class="n">SelectObject</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="n">img</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
        <span class="n">wsrc</span><span class="p">,</span> <span class="n">hsrc</span> <span class="o">=</span> <span class="n">memdc</span><span class="o">.</span><span class="n">GetSize</span><span class="p">()</span>

        <span class="c"># get destination coordinates on screen</span>
        <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data2screen</span><span class="p">(</span><span class="n">img</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">img</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data2screen</span><span class="p">(</span><span class="n">img</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">img</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>

        <span class="c"># copy</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">StretchBlit</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span><span class="p">,</span> <span class="n">memdc</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wsrc</span><span class="p">,</span> <span class="n">hsrc</span><span class="p">)</span>

        <span class="c"># destroy memoryDC</span>
        <span class="n">memdc</span><span class="o">.</span><span class="n">SelectObject</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">NullBitmap</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="FSRSPlot.drawAxes"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.drawAxes">[docs]</a>    <span class="k">def</span> <span class="nf">drawAxes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dc</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Internally used to draw the axes plus labels. Takes also care of crosshair, mouse coordinates and delta.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># make ticks along x axes</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">XTicks</span><span class="p">:</span>
            <span class="n">xs</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data2screen</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">YTicks</span><span class="p">:</span>
            <span class="n">_</span><span class="p">,</span> <span class="n">ys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data2screen</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
            <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ys</span><span class="p">)</span>

        <span class="c"># draw grid</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">showGrid</span><span class="p">:</span>
            <span class="n">dc</span><span class="o">.</span><span class="n">SetPen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gridPen</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span> <span class="ow">and</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcright</span><span class="p">:</span>
                    <span class="n">dc</span><span class="o">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span><span class="p">,</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span> <span class="ow">and</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span><span class="p">:</span>
                    <span class="n">dc</span><span class="o">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span><span class="p">,</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcright</span><span class="p">,</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

        <span class="c"># finish tickmarks</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">SetPen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">axisPen</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span> <span class="ow">and</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcright</span><span class="p">:</span>
                <span class="n">dc</span><span class="o">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span><span class="p">,</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ticklength</span><span class="p">)</span>
                <span class="n">dc</span><span class="o">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span><span class="p">,</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ticklength</span><span class="p">)</span>
                <span class="n">txtW</span><span class="p">,</span> <span class="n">txtH</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">GetTextExtent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lblx</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">dc</span><span class="o">.</span><span class="n">DrawText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lblx</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">txtW</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span> <span class="o">+</span> <span class="n">txtH</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span> <span class="ow">and</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span><span class="p">:</span>
                <span class="n">dc</span><span class="o">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span><span class="p">,</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ticklength</span><span class="p">,</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">dc</span><span class="o">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dcright</span><span class="p">,</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcright</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ticklength</span><span class="p">,</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">txtW</span><span class="p">,</span> <span class="n">txtH</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">GetTextExtent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lbly</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="n">dc</span><span class="o">.</span><span class="n">DrawText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lbly</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span> <span class="o">-</span> <span class="n">txtW</span> <span class="o">-</span> <span class="n">txtH</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">txtH</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

        <span class="c"># make a nice box around</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span><span class="p">)</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcright</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span><span class="p">)</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dcright</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcright</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span><span class="p">)</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dcright</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span><span class="p">)</span>

        <span class="c"># write axis labels</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xlabel</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">txtW</span><span class="p">,</span> <span class="n">txtH</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">GetTextExtent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xlabel</span><span class="p">)</span>
            <span class="n">dc</span><span class="o">.</span><span class="n">DrawText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xlabel</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcright</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">txtW</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcheight</span> <span class="o">-</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">txtH</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ylabel</span> <span class="o">!=</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">txtW</span><span class="p">,</span> <span class="n">txtH</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">GetTextExtent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ylabel</span><span class="p">)</span>
            <span class="n">dc</span><span class="o">.</span><span class="n">DrawRotatedText</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ylabel</span><span class="p">,</span> <span class="n">txtH</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dctop</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">txtW</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">90</span><span class="p">)</span>

        <span class="c"># display mouse coordinates</span>
        <span class="n">mx</span><span class="p">,</span> <span class="n">my</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mousePos</span><span class="o">.</span><span class="n">Get</span><span class="p">()</span>
        <span class="n">ix</span><span class="p">,</span> <span class="n">iy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">screen2data</span><span class="p">(</span><span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">)</span>
        <span class="n">txt</span> <span class="o">=</span> <span class="s">&quot;(&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">formatNumber</span><span class="p">(</span><span class="n">ix</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;, &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">formatNumber</span><span class="p">(</span><span class="n">iy</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot;)&quot;</span>
        <span class="n">txtW</span><span class="p">,</span> <span class="n">txtH</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">GetTextExtent</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">DrawText</span><span class="p">(</span><span class="n">txt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span> <span class="o">-</span> <span class="n">txtH</span> <span class="o">-</span> <span class="mi">3</span><span class="p">)</span>

        <span class="c"># if show cross, draw cross through mouse position</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">showCross</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseIn</span><span class="p">:</span>
            <span class="n">dc</span><span class="o">.</span><span class="n">SetPen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossPenDark</span><span class="p">)</span>
            <span class="n">dc</span><span class="o">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span><span class="p">,</span> <span class="n">my</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcright</span><span class="p">,</span> <span class="n">my</span><span class="p">)</span>
            <span class="n">dc</span><span class="o">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="n">mx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span><span class="p">,</span> <span class="n">mx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span><span class="p">)</span>
            <span class="n">dc</span><span class="o">.</span><span class="n">SetPen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossPenLight</span><span class="p">)</span>
            <span class="n">dc</span><span class="o">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="n">mx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span><span class="p">,</span> <span class="n">mx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span><span class="p">)</span>
            <span class="n">dc</span><span class="o">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span><span class="p">,</span> <span class="n">my</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcright</span><span class="p">,</span> <span class="n">my</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c"># write delta of cursors?</span>
        <span class="c"># this is the last part of the drawing routine as it changes the default font</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseX1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseX2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">dc</span><span class="o">.</span><span class="n">SetTextForeground</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deltafontcolor</span><span class="p">)</span>
            <span class="n">dc</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deltafont</span><span class="p">)</span>
            <span class="n">txt</span> <span class="o">=</span> <span class="s">&quot;A-B = &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">formatNumber</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cursor1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">cursor2</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">txtW</span><span class="p">,</span> <span class="n">txtH</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">GetTextExtent</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
            <span class="n">dc</span><span class="o">.</span><span class="n">DrawText</span><span class="p">(</span><span class="n">txt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcright</span> <span class="o">-</span> <span class="n">txtW</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span> <span class="o">-</span> <span class="n">txtH</span> <span class="o">-</span> <span class="mi">5</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="FSRSPlot.drawLine"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.drawLine">[docs]</a>    <span class="k">def</span> <span class="nf">drawLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dc</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s">&#39;line&#39;</span><span class="p">,</span> <span class="n">cursors</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Used internally to draw a line/scatter plot (data, type) to a device context (dc).</span>
<span class="sd">        If cursors is True, draw cursors accordingly.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># create pen</span>
        <span class="n">color</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lineColorIter</span><span class="p">)</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">SetPen</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Pen</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">PENSTYLE_SOLID</span><span class="p">))</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">SetBrush</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Brush</span><span class="p">(</span><span class="n">color</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">cursors</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseX1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cursor1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawCursor</span><span class="p">(</span><span class="n">dc</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseX1</span><span class="p">,</span> <span class="s">&quot;A&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseX2</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">cursor2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">drawCursor</span><span class="p">(</span><span class="n">dc</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouseX2</span><span class="p">,</span> <span class="s">&quot;B&quot;</span><span class="p">)</span>

        <span class="c"># set up a dcclipper to constrain the lineart to the plot area</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">DCClipper</span><span class="p">(</span><span class="n">dc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcright</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span><span class="p">)</span>

        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data2screen</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">T</span><span class="p">))</span>
        <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

        <span class="c"># if length = 1 or type is scatter, draw a point</span>
        <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s">&#39;scatter&#39;</span> <span class="ow">or</span> <span class="n">N</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">):</span>
                <span class="n">dc</span><span class="o">.</span><span class="n">DrawCircle</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">markersize</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>    <span class="c"># draw line</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
                <span class="n">dc</span><span class="o">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
</div>
<div class="viewcode-block" id="FSRSPlot.drawCursor"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.drawCursor">[docs]</a>    <span class="k">def</span> <span class="nf">drawCursor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dc</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">label</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Used internally to draw cursors.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># get data coordinates - limit cursor to valid data range</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">np</span><span class="o">.</span><span class="n">amin</span><span class="p">(</span><span class="n">data</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">amin</span><span class="p">(</span><span class="n">data</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">data</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]),</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">data</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">data</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">])</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">data</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]),</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">i0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">absolute</span><span class="p">(</span><span class="n">data</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="p">))</span>
            <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i0</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">data</span><span class="p">[</span><span class="n">i0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">i0</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">data</span><span class="p">[</span><span class="n">i0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">data</span><span class="p">[</span><span class="n">i0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="n">data</span><span class="p">[</span><span class="n">i0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>

        <span class="c"># go back to screen coordinates</span>
        <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data2screen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="c"># draw cursor</span>
        <span class="n">oldpen</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">GetPen</span><span class="p">()</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span><span class="p">)</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">5</span><span class="p">)</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">SetPen</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Pen</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">PENSTYLE_DOT</span><span class="p">))</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span><span class="p">)</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">5</span><span class="p">)</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">SetPen</span><span class="p">(</span><span class="n">oldpen</span><span class="p">)</span>

        <span class="n">txtW</span><span class="p">,</span> <span class="n">txtH</span> <span class="o">=</span> <span class="n">dc</span><span class="o">.</span><span class="n">GetTextExtent</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">DrawText</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">i</span> <span class="o">-</span> <span class="n">txtW</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span> <span class="o">+</span> <span class="mi">10</span><span class="p">)</span>
        <span class="n">txt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">formatNumber</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot; @ &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">formatNumber</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">dc</span><span class="o">.</span><span class="n">DrawText</span><span class="p">(</span><span class="n">txt</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span> <span class="o">+</span> <span class="mi">10</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>
</div>
<div class="viewcode-block" id="FSRSPlot.drawContour"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.FSRSPlot.drawContour">[docs]</a>    <span class="k">def</span> <span class="nf">drawContour</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dc</span><span class="p">,</span> <span class="n">cont</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Used internally to draw a contour plot (cont) to a device context (dc).</span>
<span class="sd">        `cont` is a tuple consisting of x-axis, y-axis and z-data (2d).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Nx</span><span class="p">,</span> <span class="n">Ny</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">cont</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">len</span><span class="p">(</span><span class="n">cont</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">cont</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data2screen</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="c"># set up a dcclipper to constrain the plot to the plot area</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">DCClipper</span><span class="p">(</span><span class="n">dc</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcright</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcleft</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dcbottom</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">dctop</span><span class="p">)</span>

        <span class="n">zavg</span> <span class="o">=</span> <span class="mf">0.25</span> <span class="o">*</span> <span class="p">(</span><span class="n">z</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">roll</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">roll</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">roll</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">roll</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">logz</span><span class="p">:</span>
            <span class="n">zavg</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan_to_num</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">zavg</span><span class="p">))</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getZColor</span><span class="p">(</span><span class="n">zavg</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Nx</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Ny</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>

                <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">x0</span> <span class="o">&gt;</span> <span class="n">x1</span><span class="p">:</span>
                    <span class="n">x0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">x1</span><span class="p">,</span> <span class="n">x0</span>
                <span class="k">if</span> <span class="n">y0</span> <span class="o">&gt;</span> <span class="n">y1</span><span class="p">:</span>
                    <span class="n">y0</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">y1</span><span class="p">,</span> <span class="n">y0</span>

                <span class="n">color</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="o">*</span><span class="n">cols</span><span class="p">[</span><span class="n">j</span><span class="p">,</span> <span class="n">i</span><span class="p">])</span>
                <span class="n">dc</span><span class="o">.</span><span class="n">SetPen</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Pen</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">linewidth</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">PENSTYLE_SOLID</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
                        <span class="n">dc</span><span class="o">.</span><span class="n">DrawPoint</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">dc</span><span class="o">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y1</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
                        <span class="n">dc</span><span class="o">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y0</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">dc</span><span class="o">.</span><span class="n">SetBrush</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Brush</span><span class="p">(</span><span class="n">color</span><span class="p">))</span>
                        <span class="n">dc</span><span class="o">.</span><span class="n">DrawRectangle</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span> <span class="o">-</span> <span class="n">x0</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">-</span> <span class="n">y0</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>


<span class="c"># simple plot window with a single plot canvas</span></div></div>
<div class="viewcode-block" id="PlotFrame"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.PlotFrame">[docs]</a><span class="k">class</span> <span class="nc">PlotFrame</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Frame</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A simple plot window containing a single plot canvas which can be accessed as `plotCanvas`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">Frame</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plotCanvas</span> <span class="o">=</span> <span class="n">FSRSPlot</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


<span class="c"># plot window with two canvases in a vertical splitter window</span></div>
<div class="viewcode-block" id="DualPlotFrame"><a class="viewcode-back" href="../../fsrsplot.html#core.FSRSPlot.DualPlotFrame">[docs]</a><span class="k">class</span> <span class="nc">DualPlotFrame</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Frame</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A simple plot window containing a two vertically stacked plot canvases.</span>
<span class="sd">    The upper / lower one can be accessed as `upperPlotCanvas` and `lowerPlotCanvas`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">Frame</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">GetClientSize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">splitter</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">SplitterWindow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">SP_3DSASH</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">SP_NOBORDER</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">upperPlotCanvas</span> <span class="o">=</span> <span class="n">FSRSPlot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">splitter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lowerPlotCanvas</span> <span class="o">=</span> <span class="n">FSRSPlot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">splitter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">splitter</span><span class="o">.</span><span class="n">SplitHorizontally</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">upperPlotCanvas</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lowerPlotCanvas</span><span class="p">,</span> <span class="n">sashPosition</span><span class="o">=</span><span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

<span class="c"># ----------------------------------------------------------------------------------------------------------------------------</span>
<span class="c"># for development</span></div>
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="c"># setup a wxPython app</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">App</span><span class="p">()</span>

    <span class="c"># get an instance of a plot frame</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">PlotFrame</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s">&quot;pyFSRS - Test plot panel&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span> <span class="mi">480</span><span class="p">))</span>
    <span class="n">frame</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
    <span class="n">frame</span><span class="o">.</span><span class="n">plotCanvas</span><span class="o">.</span><span class="n">setColormap</span><span class="p">(</span><span class="s">&quot;blue&quot;</span><span class="p">)</span>

    <span class="c"># get some nice data</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">64</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">64</span><span class="p">)</span>

    <span class="n">X</span><span class="p">,</span> <span class="n">Y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">X</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span><span class="n">Y</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="mf">5.0</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
    <span class="n">frame</span><span class="o">.</span><span class="n">plotCanvas</span><span class="o">.</span><span class="n">addImage</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>
<span class="c">#    frame.plotCanvas.addLine(x, -5 + 10.0 * np.exp(-x**2 / 5.0**2))</span>

    <span class="c"># show frame and start app</span>
    <span class="n">app</span><span class="o">.</span><span class="n">MainLoop</span><span class="p">()</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">pyFSRS 1.0 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Daniel R. Dietze.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>